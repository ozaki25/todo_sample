var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Todos=function(a){function b(){a.apply(this,arguments),this.localStorage=new Store("todos-backbone")}return __extends(b,a),b.prototype.nextOrder=function(){return this.length?this.last().get("order")+1:1},b}(Backbone.Collection),TodoList=new Todos,Todo=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.defaults=function(){return{title:"",completed:!1}},b}(Backbone.Model),AppView=function(a){function b(){a.call(this),this.setElement($(".todoapp"),!0),TodoList.fetch({reset:!0})}return __extends(b,a),b.prototype.initialize=function(){console.log("initialize()"),this.$input=$(".new-todo"),this.$list=$(".todo-list"),this.listenTo(TodoList,"add",this.addOne),this.listenTo(TodoList,"reset",this.addAll)},b.prototype.events=function(){return console.log("event()"),{"keypress .new-todo":"createOnEnter"}},b.prototype.render=function(){return console.log("render()"),TodoList.length?this.$list.show():this.$list.hide(),this},b.prototype.addOne=function(a){console.log("addOne(todo)");var b=new TodoView({model:a});this.$list.append(b.render().el)},b.prototype.addAll=function(){console.log("addAll()"),this.$list.html(""),TodoList.each(this.addOne,this)},b.prototype.newAttributes=function(){return console.log("newAttributes()"),{title:this.$input.val().trim(),order:TodoList.nextOrder(),completed:!1}},b.prototype.createOnEnter=function(a){console.log("createOnEnter(e)"),a.which===TodoView.ENTER_KEY&&this.$input.val().trim()&&(TodoList.create(this.newAttributes()),this.$input.val(""))},b}(Backbone.View),TodoView=function(a){function b(b){this.tagName="li",this.className="list-group-item",a.call(this,b),this.template=_.template($("#item-template").html()),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)}return __extends(b,a),b.prototype.events=function(){return console.log("events()"),{"click .todo-title":"edit","click .destroy":"clear","keypress .edit":"updateOnEnter","blur .edit":"close"}},b.prototype.render=function(){return console.log("render()"),this.$el.html(this.template(this.model.toJSON())),this.$input=this.$(".edit"),this},b.prototype.edit=function(){console.log("edit()"),this.$(".todo").addClass("hidden"),this.$input.removeClass("hidden"),this.$input.focus()},b.prototype.close=function(){console.log("close()");var a=this.$input.val().trim();a?this.model.save({title:a}):this.clear(),this.$(".todo").removeClass("hidden"),this.$input.addClass("hidden")},b.prototype.updateOnEnter=function(a){console.log("updateOnEnter(e)"),a.which===b.ENTER_KEY&&this.close()},b.prototype.clear=function(){console.log("clear()"),this.model.destroy()},b.ENTER_KEY=13,b}(Backbone.View);$(function(){new AppView});
//# sourceMappingURL=todo_sample.min.js.map